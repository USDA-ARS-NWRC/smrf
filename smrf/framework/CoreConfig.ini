#
#
# For general details on syntax, see:
# https://docs.python.org/2/library/configparser.html
#
# Section and keys are case insensitive.#
#
# Each section should be in the following format:
#
#
# e.g.
#
# [SECTION]
#   ITEM:  		      default = VALUE,
#		     						type = TYPE,
#				     				description = TEXT
#
# NOTES:
#  1. All the entries under the item are optional.
#  2. If no type is specified str is assumed.
#  3. If no description or default is provided None is assumed.
#
#
# 20170718 Micah Johnson
#
################################################################################
# Configurations for TOPO section
################################################################################

[topo]

type: 					default = netcdf,
 								options = [netcdf ipw],
								description = Specifies the input file type

mask: 					type = CriticalFilename,
								description = Specifies the input file type

veg_type:				type =  CriticalFilename,
								description = Path to the file containing vegetation type in ipw format

veg_height:			type =  CriticalFilename,
				 	  		description = specifies the file containing vegetation height in ipw format

veg_k: 					type =  CriticalFilename

veg_tau: 				type =  CriticalFilename

basin_lat: 			type = float,
					 			description = Latitude of the center of the basin used for sun angle calcs.

basin_lon: 			type = float,
					 			description = Longitude of the center of the basin used for sun angle calcs.

dem: 						type =  CriticalFilename,
		 						description = File containing the DEM information

filename:  			type =  CriticalFilename,
					 			description = A net cdf file containing all veg info and dem.


################################################################################
# Configuration for TIME section
################################################################################

[time]

time_step:  		default = 60,
								type = int,
								description = Time interval that SMRF distributes data at in minutes

start_date: 		type = datetime,
								description = Date to start the data distribution

end_date:  		  type = datetime,
					  		description = Date to end the data distribution

time_zone:  		default = UTC,
                description = Time zone for all times provided and how the model will
								              be run see pytz docs for information on what is accepted


################################################################################
# Configurations for Stations section
################################################################################

[stations]

stations:
                type = station,
                description = Stations to be used in distributing any data

client: 				options = [BRB TUOL BRB_2001 BRB_2002 BRB_2003 BRB_2004 BRB_2005
												BRB_2013 BRB_2014 BRB_2015 BRB_2016 BRB_2017 BRB_bbox RUSH
												SJ_2017 TUOL_bbox UNCOM MOKE other RUSH_2017 TUOL_2017
                        BRB_2018],
                type = station,
								description = Clients available on the server to use that are a collection of station names


################################################################################
# CSV section configurations
################################################################################

[csv]

metadata: 			type =  CriticalFilename,
								description = Path to CSV containing the station metadata

air_temp:				type =  CriticalFilename,
								description = Path to CSV containing the station measured air temperature

vapor_pressure:	type =  CriticalFilename,
								description = Path to CSV containing the station measured vapor pressure

precip:					type =  CriticalFilename,
								description = Path to CSV containing the station measured precipitation

wind_speed:			type =  CriticalFilename,
								description = Path to CSV containing the station measured wind speed

wind_direction:	type =  CriticalFilename,
								description = Path to CSV containing the station measured wind direction

cloud_factor:		type =  CriticalFilename,
								description = Path to CSV containing the station measured cloud factor

################################################################################
# MySQL database configurations
################################################################################

[mysql]

user:						description = username for database login.

password:				description = password used for database login.

host: 					description = IP address to server.

port:           default = 3606,
                type = int,
                description = Port to use for logging into a db.

database:				default = weather_db,
                description = name of the database containing station data

data_table:			default = tbl_level2,
                description = name of the database table containing station data

station_table:	default = tbl_stations,
                description = name of the database table containing client and source

metadata:				default = tbl_metadata,
                description = name of the database table containing station metadata

air_temp:				default = air_temp,
                description = name of the table column containing station air temperature

vapor_pressure:	default = vapor_pressure,
                description = name of the table column containing station vapor pressure

precip:					default = precip_accum,
                description = name of the table column containing station precipitation

wind_speed:			default = wind_speed,
                description = name of the table column containing station wind speed

wind_direction:	default = wind_direction,
                description = name of the table column containing station wind direction

cloud_factor:		default = cloud_factor,
                description = name of the table column containing station cloud factor

solar:					default = solar_radiation,
                description = name of the table column containing station solar radiation


################################################################################
# Gridded datasets configurations
################################################################################

[gridded]

data_type:			default = wrf,
								options = [wrf hrrr],
								description = Format of the outputted data

forecast_flag:      default = False,
                    type = bool,
                    description = if the gridded data is forecast or not

file:						default = None,
                type =  CriticalFilename,
								description = Path to the netcdf file containing wrf data

directory:			default = None,
                type = CriticalDirectory,
						    description = Path to the top level directory where multiple gridded dataset live

n_forecast_hours:     default = 18,
                      type = int,
                      description = number of hours to forecast with hrrr

zone_number:		type = int,
								description = For converting latitude and longitude to X and Y UTM coordinates

zone_letter:		description = For converting latitude and longitude to X and Y UTM coordinates


################################################################################
# air temp distribution configuration
################################################################################
# If the ‘stations’ key is set only those stations will be used, else all
# possible stations will be used

[air_temp]
distribution:		default = idw,
								options = [dk idw grid kriging],
								description = Distribution method to use for this variable

detrend:				default = true,
								type = bool,
								description = Whether to detrend the distribution process

slope:					default = -1,
								options = [-1 0 1],
								type = int,
								description = if detrend is true constrain the slope to positive (1) or negative (-1) or no constraint (0)

stations:				description = Stations to use for distributing this variable

max:						default = 47.0,
								type = float,
								description = Maximum possible for this variable

min:						default = -73.0,
								type = float,
								description = Minimum possible this variable

mask:						default = True,
								type = bool,
								description = Mask the distribution calculations

method:					default = linear,
								options = [nearest linear cubic],
								description = interpolation method to use for this variable

power:					default = 2.0,
								type = float,
                description = Power for decay of a stations influence in inverse distance weighting

dk_nthreads:		default = 1,
								type = int,
								description = Number of threads to use in the dk calculation


regression_method:						default = 1,
								              options = [1],
								              type = int,
                              description = Polyfit order to use when using detrended kriging
# Krig Settings
variogram_model:              default = linear,
                              options = [linear power gaussian spherical exponential hole-effect],
                              description = Specifies which kriging variogram model to use

nlags:                        default = 6,
                              type = int,
                              description = Number of averaging bins for the kriging semivariogram

krig_weight:                  default = False,
                              type = bool,
                              description = Flag that specifies if the kriging
                                            semivariance at smaller lags should
                                            be weighted more heavily when
                                            automatically calculating variogram
                                            model.

anisotropy_scaling:           default = 1.0,
                              type = float,
                              description = Scalar stretching value for kriging
                                            to take into account anisotropy.

anisotropy_angle:             default = 0.0,
                              type = float,
                              description = CCW angle (in degrees) by which to
                                            rotate coordinate system in order
                                            to take into account anisotropy.

coordinates_type:             default = euclidean,
                              options = [euclidean geographic],
                              description = Determines if the x and y
                                            coordinates are interpreted as on a
                                            plane (euclidean) or as coordinates
                                            on a sphere (geographic).


################################################################################
# vapor_pressure distribution
################################################################################

[vapor_pressure]

distribution:		default = idw,
								options = [dk idw grid kriging],
								description = Distribution method to use for this variable

detrend:				default = true,
								type = bool,
								description = Whether to detrend the distribution process

slope:					default = -1,
								options = [-1 0 1],
								type = int,
								description = if detrend is true constrain the slope to positive (1) or negative (-1) or no constraint (0)

stations:				description = Stations to use for distributing this variable

max:						default = 5000.0,
								type = float,
								description = Maximum possible this variable

min:						default = 10.0,
								type = float,
								description = Minimum possible for this variable

mask:						default = True,
								type = bool,
								description = Mask the distribution calculations

method:					default = linear,
                options = [nearest linear cubic]
								description = interpolation method to use for this variable

power:					default = 2.0,
								type = float,
                description = Power for decay of a stations influence in inverse distance weighting


dk_nthreads:		default = 1,
								type = int,
								description = Number of threads to use in the dk calculation

regression_method:									default = 1,
																		options = [1],
																		type = int,
                                    description = Polyfit order to use when using detrended kriging

nthreads:				default = 2,
								type = int,
								description = Number of threads to use in the dew point calculation

tolerance:			default = 0.01,
								type = float,
								description = Solving criteria for the dew point calculation


# Krig Settings
variogram_model:              default = linear,
                              options = [linear power gaussian spherical exponential hole-effect],
                              description = Specifies which kriging variogram model to use

nlags:                        default = 6,
                              type = int,
                              description = Number of averaging bins for the kriging semivariogram

krig_weight:                  default = False,
                              type = bool,
                              description = Flag that specifies if the kriging
                                            semivariance at smaller lags should
                                            be weighted more heavily when
                                            automatically calculating variogram
                                            model.

anisotropy_scaling:           default = 1.0,
                              type = float,
                              description = Scalar stretching value for kriging
                                            to take into account anisotropy.

anisotropy_angle:             default = 0.0,
                              type = float,
                              description = CCW angle (in degrees) by which to
                                            rotate coordinate system in order
                                            to take into account anisotropy.

coordinates_type:             default = euclidean,
                              options = [euclidean geographic],
                              description = Determines if the x and y
                                            coordinates are interpreted as on a
                                            plane (euclidean) or as coordinates
                                            on a sphere (geographic).

################################################################################
# wind_speed and wind_direction distribution
################################################################################

[wind]

distribution:		default = idw,
								options = [dk idw grid kriging],
								description = Distribution method to use for this variable

detrend:				default = False,
								type = bool,
								description = Whether to detrend the distribution process

slope:					default = 1,
								options = [-1 0 1],
								type = int,
								description = if detrend is true constrain the slope to positive (1) or negative (-1) or no constraint (0)

stations:				description = Stations to use for distributing this variable

max:						default = 35.0,
								type = float,
								description = Maximum possible this variable

min:						default = 0.447,
								type = float,
								description = Minimum possible for this variable

mask:						default = True,
								type = bool,
								description = Mask the distribution calculations

method:					default = linear,
                options = [nearest linear cubic],
								description = interpolation method to use for this variable

power:					default = 2.0,
								type = float,
                description = Power for decay of a stations influence in inverse distance weighting


dk_nthreads:		default = 2,
								type = int,
								description = Number of threads to use in the dk calculation

regression_method:									default = 1,
																		options = [1],
																		type = int,
                                    description = Polyfit order to use when using detrended kriging

peak:			 				description = Name of stations that lie on a peak or a high point

station_default: default = 11.4,
								 type = float,
								 description = Applies the value to all stations not specified

veg_default:	   default = 11.4,
								 type = float,
								 description = Applies the value to all vegetation not specified

veg_41:	 				 default = 3.3,
								 type = float,
								 description = Applies the value where vegetation equals 41

veg_42:	 				 default = 3.3,
								 type = float,
								 description = Applies the value where vegetation equals 42

veg_43:	 			   default = 11.4,
 								 type = float,
 								 description = Applies the value where vegetation equals 43

reduction_factor: default = 0.7,
								 	type = float,
								 	description = If wind speeds are still off here is a scaling factor

maxus_netcdf:			type = CriticalFilename,
									description = NetCDF file containing the maxus values for wind

# Krig Settings
variogram_model:              default = linear,
                              options = [linear power gaussian spherical exponential hole-effect],
                              description = Specifies which kriging variogram model to use

nlags:                        default = 6,
                              type = int,
                              description = Number of averaging bins for the kriging semivariogram

krig_weight:                  default = False,
                              type = bool,
                              description = Flag that specifies if the kriging
                                            semivariance at smaller lags should
                                            be weighted more heavily when
                                            automatically calculating variogram
                                            model.

anisotropy_scaling:           default = 1.0,
                              type = float,
                              description = Scalar stretching value for kriging
                                            to take into account anisotropy.

anisotropy_angle:             default = 0.0,
                              type = float,
                              description = CCW angle (in degrees) by which to
                                            rotate coordinate system in order
                                            to take into account anisotropy.

coordinates_type:             default = euclidean,
                              options = [euclidean geographic],
                              description = Determines if the x and y
                                            coordinates are interpreted as on a
                                            plane (euclidean) or as coordinates
                                            on a sphere (geographic).


################################################################################
# precipitation
################################################################################

[precip]

distribution:		default = dk,
								options = [dk idw grid kriging],
								description = Distribution method to use for this variable

detrend:				default = true,
								type = bool,
								description = Whether to detrend the distribution process

slope:					default = 1,
								options = [-1 0 1],
								type = int,
								description = if detrend is true constrain the slope to positive (1) or negative (-1) or no constraint (0)

stations:				description = Stations to use for distributing this variable

max:						default = None,
								type = float,
								description = Maximum possible this variable

min:						default = 0.0,
								type = float,
								description = Minimum possible for this variable

mask:						default = True,
								type = bool,
								description = Mask the distribution calculations

method:					default = linear,
								options = [nearest linear cubic],
								description = interpolation method to use for this variable

power:					default = 2.0,
								type = float,
                description = Power for decay of a stations influence in inverse distance weighting


dk_nthreads:		default = 2,
								type = int,
								description = Number of threads to use in the dk calculation


storm_mass_threshold:								default = 1.0,
																		type = float,
																		description = Start criteria for a storm in mm of measured precip

time_steps_to_end_storms:						default = 6,
																		type = int,
																		description = number of timesteps to elapse with precip under start criteria before ending a storm

nasde_model:												default = marks2017,
																		options = [marks2017 susong1999 piecewise_susong1999],
																		description = Method to use for calculating the new snow density

regression_method:									default = 1,
																		options = [1],
																		type = int,
                                    description = Polyfit order to use when using detrended kriging

storm_days_restart:									default = None,
																		type =  CriticalFilename,
																		description = Path to netcdf representing the last storm days so a run can continue in between stops

adjust_for_undercatch:							default = true,
																		type = bool,
																		description = Apply undercatch relationships to precip gauges

catchment_model_default:            default = us_nws_8_shielded,
                                    options = [us_nws_8_shielded us_nws_8_unshielded],
                                    description = WMO model used to adjust precip
                                                  for undercatch of precip

# Krig Settings
variogram_model:              default = linear,
                              options = [linear power gaussian spherical exponential hole-effect],
                              description = Specifies which kriging variogram model to use

nlags:                        default = 6,
                              type = int,
                              description = Number of averaging bins for the kriging semivariogram

krig_weight:                  default = False,
                              type = bool,
                              description = Flag that specifies if the kriging
                                            semivariance at smaller lags should
                                            be weighted more heavily when
                                            automatically calculating variogram
                                            model.

anisotropy_scaling:           default = 1.0,
                              type = float,
                              description = Scalar stretching value for kriging
                                            to take into account anisotropy.

anisotropy_angle:             default = 0.0,
                              type = float,
                              description = CCW angle (in degrees) by which to
                                            rotate coordinate system in order
                                            to take into account anisotropy.

coordinates_type:             default = euclidean,
                              options = [euclidean geographic],
                              description = Determines if the x and y
                                            coordinates are interpreted as on a
                                            plane (euclidean) or as coordinates
                                            on a sphere (geographic).

################################################################################
# albedo configurations
################################################################################
[albedo]

max:						default = 1.0,
								type = float,
								description = Maximum possible this variable

min:						default = 0.0,
								type = float,
								description = Minimum possible for this variable

mask:						default = True,
								type = bool,
								description = Mask the distribution calculations

method:					default = linear,
								options = [nearest linear cubic 1-D cubic 2-D],
								description = interpolation method to use for this variable

power:					default = 2.0,
								type = float,
                description = Power for decay of a stations influence in inverse distance weighting

grain_size:			default = 300.0,
								type = float,
								description = Effective grain radius of snow after last storm (mu m)

max_grain:			default = 2000.0,
								type = float,
								description = Max grain radius of snow possible

dirt:						default = 2.0,
								type = float,
								description = Effective contamination for adjustment to visible albedo (usually between 1.5-3.0)

decay_method:		default = None,
								options = [ hardy2000 date_method None],
								description = Describe how the albedo decays in the late season

start_decay:		default = None,
								type = datetime,
								description = Starting date for applying the decay method described by date_method

end_decay:	   	default = None,
								type = datetime,
								description = Starting date for applying the decay method described by date_method

decay_power:		default = 0.714,
								type = float,
								description = Exponent value of the decay rate equation prescribed by the method.

veg_default:	  default = 0.25,
							  type = float,
							  description = Applies the value to all vegetation not specified

veg_41:	 				default = 0.36,
							  type = float,
							  description = Applies the value where vegetation equals 41

veg_42:	 				default = 0.36,
							  type = float,
							  description = Applies the value where vegetation equals 42

veg_43:	 			  default = 0.25,
							  type = float,
							  description = Applies the value where vegetation equals 43

litter_albedo:	default = 0.2,
								type = float,
								description = albedo of the litter on the snow using the hard method

litter_default:	default = 0.003,
							  type = float,
							  description = Litter rate for places where vegetation not specified

litter_41:	 		default = 0.006,
							  type = float,
							  description = Litter rate for Veg type 41

litter_42:	 		default = 0.006,
							  type = float,
							  description = Litter rate for Veg type 42

litter_43:	 		default = 0.003,
							  type = float,
							  description = Litter rate for Veg type 43


################################################################################
# solar
################################################################################

[solar]

distribution:		default = idw,
								options = [dk idw grid kriging],
								description = Distribution method to use for this variable

detrend:				default = false,
								type = bool,
								description = Whether to detrend the distribution process

slope:					default = 1,
								options = [-1 0 1],
								type = int,
								description = if detrend is true constrain the slope to positive (1) or negative (-1) or no constraint (0)

stations:				description = Stations to use for distributing this variable

max:						default = 800.0,
								type = float,
								description = Maximum possible this variable

min:						default = 0.0,
								type = float,
								description = Minimum possible for this variable

mask:						default = True,
								type = bool,
								description = Mask the distribution calculations

method:					default = linear,
								options = [nearest linear cubic],
								description = interpolation method to use for this variable

power:					default = 2.0,
								type = float,
                description = Power for decay of a stations influence in inverse distance weighting

dk_nthreads:		default = 2,
								type = int,
								description = Number of threads to use in the dk calculation

regression_method:									default = 1,
																		options = [1],
																		type = int,
                                    description = Polyfit order to use when using detrended kriging

clear_opt_depth: default = 100.0,
								 type = float,
								 description = Elevation of optical depth measurement

clear_tau:			 default = 0.2,
								 type = float,
								 description = Optical depth at z

clear_omega:		default = 0.85,
								type = float,
								description = Single-scattering albedo

clear_gamma:    default = 0.3,
							  type = float,
						    description = Scattering asymmetry parameter

correct_veg:  	 default = true,
								 type = bool,
								 description = Apply solar radiation corrections according to veg_type

correct_albedo:	default = true,
								type = bool,
								description = Multiply the solar radiation by 1-snow_albedo.

correct_cloud:	 default = true,
								 type = bool,
								 description = Multiply the solar radiation by the cloud factor
                               derived by station data.


# Krig Settings
variogram_model:              default = linear,
                             options = [linear power gaussian spherical exponential hole-effect],
                             description = Specifies which kriging variogram model to use

nlags:                        default = 6,
                             type = int,
                             description = Number of averaging bins for the kriging semivariogram

krig_weight:                  default = False,
                             type = bool,
                             description = Flag that specifies if the kriging
                                           semivariance at smaller lags should
                                           be weighted more heavily when
                                           automatically calculating variogram
                                           model.

anisotropy_scaling:           default = 1.0,
                             type = float,
                             description = Scalar stretching value for kriging
                                           to take into account anisotropy.

anisotropy_angle:             default = 0.0,
                             type = float,
                             description = CCW angle (in degrees) by which to
                                           rotate coordinate system in order
                                           to take into account anisotropy.

coordinates_type:             default = euclidean,
                             options = [euclidean geographic],
                             description = Determines if the x and y
                                           coordinates are interpreted as on a
                                           plane (euclidean) or as coordinates
                                           on a sphere (geographic).

################################################################################
# thermal
################################################################################

[thermal]

max:						default = 600.0,
								type = float,
								description = Maximum possible this variable

min:						default = 0.0,
								type = float,
								description = Minimum possible for this variable

mask:						default = True,
								type = bool,
								description = Mask the thermal radiation calculations

method:					default = marks1979,
								options = [marks1979 dilley1998 prata1996 angstrom1918],
								description = Method for calculating the thermal radiation

cloud_method:	  default = garen2005,
								options = [garen2005 unsworth1975 kimball1982 crawford1999],
								description = Method for adjusting radiation for cloud effects

nthreads:				default = 2,
								type = int,
								description = Number of threads to use thermal radiation calcs when using Marks1979

correct_cloud:  default = true,
								type = bool,
								description = specify whether to use the cloud adjustments in thermal calculation

correct_veg:		default = true,
								type = bool,
								description = specifies whether to account for vegetation in the thermal calculations

correct_terrain: default = true,
								 type = bool,
							 	 description = specifies whether to account for vegetation in the thermal calculations


################################################################################
# soil temperature
################################################################################

[soil_temp]

temp:								default = -2.5,
										type = float,
										description = constant value to use for the soil temperature.


################################################################################
# output variables
################################################################################

[output]

frequency:			default = 1,
								type = int,
								description = Number of timesteps to output data.

out_location:		default = None,
								type = CriticalDirectory,
								description = Directory to output results

variables:      default = [thermal air_temp vapor_pressure wind_speed
                          wind_direction net_solar precip percent_snow
                          snow_density dew_point],
      					options = [all air_temp albedo_vis albedo_ir precip percent_snow
      					 					snow_density storm_days
      										clear_ir_beam clear_ir_diffuse clear_vis_beam
      					 					clear_vis_diffuse cloud_factor cloud_ir_beam
      										cloud_ir_diffuse cloud_vis_beam cloud_vis_diffuse net_solar
      										veg_ir_beam veg_ir_diffuse veg_vis_beam veg_vis_diffuse
      										thermal vapor_pressure dew_point flatwind wind_speed
      										wind_direction storm_total thermal_clear thermal_veg thermal_cloud],
      			  	description = Variables to output after being calculated.

mask:           default = False,
                type = bool,
                description = Mask the final NetCDF output.

file_type: 	    default = netcdf,
						    options = [netcdf],
						    description = Format to use for outputting data.

input_backup:  default = true,
               type = bool,
							 description = Specify whether to backup the input data and
							 							 create config file to run the smrf run from that
														 backup.

################################################################################
# logging
################################################################################

[logging]

log_level: default = debug,
					 options = [debug info error],
					 description = level of information to be logged

log_file:  default = None,
           type = filename,
					 description = File path to a txt file for the log info to be outputted

qotw:      default = false,
           type = bool


################################################################################
# system variables
################################################################################

[system]

time_out:	 default = None,
					 type = float,
					 description = Amount of time to wait for a thread before timing out

threading: default = true,
					 type = bool,
					 description = Specify whether to use python threading in calculations.

max_values: default = 2,
						type = int,
						description = How many timesteps that a calculation can get ahead
													while threading if it is independent of other variables.
